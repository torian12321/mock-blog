(this["webpackJsonpmy-blog"]=this["webpackJsonpmy-blog"]||[]).push([[0],{10:function(e,t,n){e.exports={comment:"Comment_comment__3Mz33",comment_response:"Comment_comment_response__2rqUj",body:"Comment_body__2zzxR",header:"Comment_header__3zM0p",header_date:"Comment_header_date__1LkQG"}},12:function(e,t,n){e.exports={post:"Post_post__2EB2l",body:"Post_body__2MiGR",header:"Post_header__2IptI",date:"Post_date__Kr7ri",btn:"Post_btn__2zjqp"}},15:function(e,t,n){e.exports={wrapper:"Field_wrapper__PFoPD",content:"Field_content__bZ_Ml",label:"Field_label__1ffeG",field:"Field_field__f3b1c"}},16:function(e,t,n){e.exports={wrapper:"layout_wrapper__25n3_",header:"layout_header__3ieFQ"}},23:function(e,t,n){e.exports={btn:"Button_btn__2sT6n",btn_disabled:"Button_btn_disabled__3gKEb"}},24:function(e,t,n){},38:function(e,t,n){e.exports=n(68)},43:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(35),o=n.n(c),l=(n(43),n(11)),s=n(2),i=r.a.createContext({}),m=n(37),u=n(3),d=n(20),p=n.n(d),f=("".concat("https://api-posts-demo.herokuapp.com","/posts"),"".concat("https://api-posts-demo.herokuapp.com","/comments")),v=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return"".concat(a,"-").concat(n,"-").concat(t)},h=function(e){var t=e.children,n=Object(a.useState)([]),c=Object(u.a)(n,2),o=c[0],l=c[1],s=Object(a.useState)(null),d=Object(u.a)(s,2),h=d[0],b=d[1],_=Object(a.useState)(!1),E=Object(u.a)(_,2),N=E[0],g=E[1],j=Object(a.useState)(Date.now()),y=Object(u.a)(j,2),C=y[0],O=y[1];Object(a.useEffect)((function(){O(Date.now())}),[o]);var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;g(!0),p.a.get(e).then((function(e){var t=e.data;l(void 0===t?[]:t)})).catch((function(e){b(e)})).then((function(){g(!1)}))},k=function(e){w("".concat(f,"?postId=").concat(e))};return r.a.createElement(i.Provider,{value:{comments:o,isFetching:N,lastUpdate:C,errors:h,actions:{getCommnentById:function(e){return o.find((function(t){return t.id===e}))||{}},addComment:function(e){p.a.post(f,Object(m.a)({date:v()},e)).then((function(e){var t=e.data,n=(void 0===t?{}:t).postId;n&&k(n)})).catch((function(e){b(e)}))},fetchComments:w,fetchCommnentByPostId:k}}},t)},b=n(16),_=n.n(b),E=function(){return r.a.createElement("header",{className:_.a.header},r.a.createElement("div",{className:"container"},r.a.createElement(l.b,{to:"/"},"Home")))},N=function(e){var t=e.children;return r.a.createElement("div",{className:_.a.wrapper},r.a.createElement(E,null),t)},g=n(13),j=n.n(g),y=n(17),C=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(null),l=Object(u.a)(o,2),s=l[0],i=l[1],m=Object(a.useState)(!1),d=Object(u.a)(m,2),p=d[0],f=d[1];Object(a.useEffect)((function(){v()}),[]);var v=function(){var t=Object(y.a)(j.a.mark((function t(){var n,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,fetch(e);case 4:return n=t.sent,t.next=7,n.json();case 7:a=t.sent,c(a),i(null),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),c(null),i(t.t0);case 16:return t.prev=16,f(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,12,16,19]])})));return function(){return t.apply(this,arguments)}}();return{data:r,isFetching:p,errors:s,reload:v}},O="".concat("https://api-posts-demo.herokuapp.com","/posts"),w=("".concat("https://api-posts-demo.herokuapp.com","/comments"),n(9)),k=n.n(w),x=n(18),F=function(e){var t=e.children,n=e.caption,a=e.htmlFor,c=e.className,o=t||n;return o?r.a.createElement("label",{htmlFor:a,className:c},o):null},S=n(15),I=n.n(S),P=function(e){var t=e.name,n=e.label,a=e.placeholder,c=e.type,o=void 0===c?"text":c,l=e.className;return r.a.createElement("div",{className:k()(I.a.wrapper,l)},r.a.createElement("div",{className:I.a.content},r.a.createElement(F,{htmlFor:t,caption:n,className:I.a.label}),r.a.createElement(x.a,{className:I.a.field,name:t,component:"textarea"===o?"textarea":"input",type:o,placeholder:a})))},B=n(23),q=n.n(B),M=function(e){var t=e.children,n=e.caption,a=e.className,c=e.onClick,o=e.type,l=void 0===o?"submit":o,s=e.disabled,i=void 0!==s&&s,m=t||n;return m?r.a.createElement("button",{type:l,onClick:function(){c&&!i&&c()},className:k()(q.a.btn,i&&q.a.btn_disabled,a),disabled:i},m):null},z=n(24),A=n.n(z),D=function(e){return new Promise((function(t){return setTimeout(t,e)}))},R=function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(300);case 2:console.log(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t={};return e.userName||(t.user="Required"),e.notes||(t.content="Required"),t},J=function(e){var t=e.onAddComment,n=e.className,c=Object(a.useState)(!1),o=Object(u.a)(c,2),l=o[0],s=o[1];return t?null:r.a.createElement("div",{className:k()(A.a.post,n)},r.a.createElement(M,{caption:l?"Close Form":"Add Comment",onClick:function(){s(!l)},className:A.a.btn}),l&&r.a.createElement(x.b,{onSubmit:R,initialValues:{},validate:G,render:function(e){var t=e.handleSubmit,n=(e.form,e.submitting,e.pristine,function(e){var t=G(e);return!(0===Object.keys(t).length&&t.constructor===Object)}(e.values));return r.a.createElement("form",{onSubmit:t},r.a.createElement(P,{label:"User Name",name:"user",placeholder:"e.g. Bla bla"}),r.a.createElement(P,{type:"textarea",label:"Comment",name:"content",placeholder:"Notes"}),r.a.createElement(M,{caption:"Submit",disabled:n}))}}))},L=n(12),T=n.n(L),U=function(e){var t=e.children,n=e.className,a=e.title,c=e.date,o=e.onAddComment;return r.a.createElement("div",{className:k()(T.a.post,n)},r.a.createElement("div",{className:T.a.body},r.a.createElement("span",{className:T.a.header},a,r.a.createElement("span",{className:T.a.date},c)),r.a.createElement("span",{className:T.a.content},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}})),r.a.createElement(J,null),!!o&&r.a.createElement("div",null,r.a.createElement(M,{caption:"Add Comment",onClick:o,className:T.a.btn}))))},H=function(e){var t=e.data;return r.a.createElement(U,{key:t.id,title:t.title,date:t.publish_date},t.content)},K=function(){var e=function(){var e=C(O),t=e.data;return[(void 0===t?[]:t)||[],e.isFetching,e.reload]}(),t=Object(u.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"container"},!!n&&!a&&n.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.a.createElement(l.b,{to:"/article/".concat(e.id),key:e.id},r.a.createElement(H,{data:e}))})))},Q=n(10),W=n.n(Q),V=function(e){var t=e.children,n=e.className,a=e.user,c=e.date;return r.a.createElement("div",{className:k()(W.a.comment,n)},r.a.createElement("div",{className:W.a.body},r.a.createElement("span",{className:W.a.header},a," - ",r.a.createElement("span",{className:W.a.header_date},c)),r.a.createElement("span",{className:W.a.content},t)))},Y=function e(t){var n=t.comment,a=void 0===n?{}:n,c=t.level,o=void 0===c?1:c,l=a.id,s=a.user,i=a.date,m=a.content,u=a.comments,d=void 0===u?[]:u;return r.a.createElement("div",null,r.a.createElement(V,{key:l,user:s,date:i},m),r.a.createElement("div",{className:W.a.comment_response},d.map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.a.createElement(e,{comment:t,level:o+1,key:t.id})}))))},Z=function(e){var t=e.comments,n=void 0===t?[]:t,a=e.loading,c=void 0!==a&&a,o=function e(t,n){var a=[];return t.sort((function(e,t){return e.date>t.date?1:t.date>e.date?-1:0})).reverse().filter((function(e){return e.parent_id===n})).forEach((function(n){return n.comments=e(t,n.id),a.push(n)})),a}(n,null);return c?r.a.createElement("span",null,"Loading..."):o.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.a.createElement(Y,{comment:e,key:e.id})}))},$=function(){var e=Object(s.f)().postId,t=function(e){var t=C("".concat(O,"?id=").concat(e)),n=t.data,a=void 0===n?[]:n,r=t.isFetching,c=t.reload;return[a&&a[0]||{},r,c]}(e),n=Object(u.a)(t,1)[0],c=function(){var e=r.a.useContext(i);if(!e)throw new Error("Components cannot be rendered outside <CommentsProvider>");return e}(),o=c.comments,l=c.isFetching,m=c.actions;Object(a.useEffect)((function(){m.fetchCommnentByPostId(e)}),[m,e]);return r.a.createElement("div",{className:"container"},r.a.createElement(U,{title:n.title,date:n.publish_date,onAddComment:function(){m.addComment({postId:e,parent_id:null,user:"Jakeee",content:"Cras lectus nisl, scelerisque quis elit ut, luctus scelerisque purus."})}},n.content),r.a.createElement(Z,{comments:o,loading:l}))},X=(n(67),function(){return r.a.createElement(l.a,null,r.a.createElement(h,null,r.a.createElement(N,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(K,null)),r.a.createElement(s.a,{path:"/article/:postId"},r.a.createElement($,null)),r.a.createElement(s.a,{path:"*"},r.a.createElement(K,null))))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.fa2415b0.chunk.js.map